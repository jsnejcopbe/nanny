/* SVN.committedRevision=1504173 */
var t_again_message=".again_message",_timer,_intDate=59,_curDate=0;_curDate=_intDate;function counter(){Captcha.send(null,on_send_mobile_captcha_success,on_send_mobile_captcha_fail)}define(["zepto","fastclick"],function(c,b){b.attach(document.body);var a={};a.init=function(d){this.config=this.config||d;on_load();a.bindEvents();loadImageUrl("4")};a.bindEvents=function(){c("#nav_back").on("click",function(){window.location="http://m.yhd.com"});c("#login_btn").on("click",function(){window.location=URLPrefix.passport+"/m/login_input.do"});c("#register_form-phone").on("input",on_mobile_register_form_phone_input);c("#register_form-phone").on("blur",function(){var d=c(this);check_phone(d.val())});c("#register_form-phone-verification").on("blur",check_captcha);c("#register_form-phone-pwd").on("blur",function(){var d=c("#register_form-phone-pwd").val();
check_password(d)});c("#register_form-mail").on("input",on_email_register_form_email_input);c("#register_form-mail").on("blur",function(){var d=c(this);check_email(d.val())});c("#register_form-mail-verification").on("blur",em_check_captcha);c("#register_form-mail-pwd").on("blur",function(){var d=c("#register_form-mail-pwd").val();em_check_password(d)});c(".license-terms").on("click",function(){window.location="http://cms.yhd.com/cms/view.do?topicId=24883"});c("#captcha_refresh").on("click",function(){Captcha.load("[class='con_box show'] .pic_verification")});c("#m_captcha_refresh").on("click",function(){Captcha.load("[class='con_box show'] .pic_verification")});c(".tab_box .item").on("click",function(){var d=c(this);d.addClass("current").siblings().removeClass("current");c(".con_box").eq(d.index()).addClass("show").siblings(".con_box").removeClass("show");
Captcha.load("[class='con_box show'] .pic_verification");c("[class='con_box show'] .pic_verification").off("click",on_captacha_load);c("[class='con_box show'] .pic_verification").on("click",on_captacha_load)});c("input.show_pwd").on("click",function(){var d=c(this);if(d.prop("checked")===true){c("#register_form-phone-pwd").attr("type","text");c("#register_form-mail-pwd").attr("type","text")}else{c("#register_form-phone-pwd").attr("type","password");c("#register_form-mail-pwd").attr("type","password")}});c(".again_message").on("click",function(){var d=c(this);if(!d.hasClass("disable")){c(t_again_message).addClass("disable");c(t_again_message).find(".num").text(_intDate+1);_curDate=_intDate;counter()}});c(".email_lists .item").on("click",function(){var d=c(this);c("#register_form-mail").val(d.text());
d.parent(".email_lists").hide()})};return a});isValidMobile=function(b){var a=/^1\d{10}$/;return a.test(b)};on_mobile_register_form_phone_input=function(){var a=$("#register_form-phone").val();if(isValidMobile(a)){$(".step_1 .phone_reg_btn").removeClass("disable");$("[class='step_1'] .phone_reg_btn").on("click",submit_mobile)}else{$(".step_1 .phone_reg_btn").addClass("disable");$("[class='step_1'] .phone_reg_btn").off("click",submit_mobile)}};on_captacha_load=function(a){Captcha.load("[class='con_box show'] .pic_verification")};on_load=function(){Captcha.load("[class='con_box show'] .pic_verification");$("[class='con_box show'] .pic_verification").on("click",on_captacha_load);on_mobile_register_form_check();on_email_register_form_check()};on_mobile_register_form_check=function(){var a=$("#register_form-phone").val();
if(isValidMobile(a)){$(".step_1 .phone_reg_btn").removeClass("disable");$("[class='step_1'] .phone_reg_btn").on("click",submit_mobile)}else{$(".step_1 .phone_reg_btn").addClass("disable");$("[class='step_1'] .phone_reg_btn").off("click",submit_mobile)}};function isValidEmail(a){if(a==""){return false}var b=/^\w[\w\$\^\(\)\[\]\{\}\.\-\+,]{0,100}@([a-zA-Z0-9][\w\-]*\.)+[a-zA-Z]{2,6}$/;if(!b.test(a)){return false}if(a.length>100){return false}if((/@yahoo.cn$\b/).test(a.toLowerCase())||(/@yahoo.com.cn$\b/).test(a.toLowerCase())){return false}return true}function on_email_register_form_email_input(){var a=$("#register_form-mail").val();if(isValidEmail(a)){$("#email_reg_btn").removeClass("disable");$("#email_reg_btn").on("click",em_register)}else{$("#email_reg_btn").addClass("disable");$("#email_reg_btn").off("click",em_register)
}}on_email_register_form_check=function(){var a=$("#register_form-mail").val();if(isValidEmail(a)){$("#email_reg_btn").removeClass("disable");$("#email_reg_btn").on("click",em_register)}else{$("#email_reg_btn").addClass("disable");$("#email_reg_btn").off("click",em_register)}};function check_email(a){if(a==""){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;邮箱不能为空");$("#em_error_tips").show();return false}var b=/^\w[\w\$\^\(\)\[\]\{\}\.\-\+,]{0,100}@([a-zA-Z0-9][\w\-]*\.)+[a-zA-Z]{2,6}$/;if(!b.test(a)){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的邮箱");$("#em_error_tips").show();return false}if(a.length>100){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;邮箱长度不能超过100位字符");$("#em_error_tips").show();
return false}if((/@yahoo.cn$\b/).test(a.toLowerCase())||(/@yahoo.com.cn$\b/).test(a.toLowerCase())){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;雅虎中国邮箱已停用，请更换邮箱注册");$("#em_error_tips").show();return false}$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>");$("#em_error_tips").hide();return true}function em_check_password(a){var b=check_pwd1(a);if(b==1){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能为空");$("#em_error_tips").show();return false}if(b==2){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码为6-20位字符");$("#em_error_tips").show();return false}if(b==3){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码为6-20位字符");$("#em_error_tips").show();
return false}if(b==4){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码中不允许有空格");$("#em_error_tips").show();return false}if(b==5){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为数字");$("#em_error_tips").show();return false}if(b==6){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为字母，请包含至少1个数字或符号");$("#em_error_tips").show();return false}if(b==7){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为符号");$("#em_error_tips").show();return false}if(b==8){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为相同字符或数字");$("#em_error_tips").show();return false}$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>");
$("#em_error_tips").hide();return true}em_check_captcha=function(){var a=$("#register_form-phone-verification").val();if(a==""){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;请输入校验码");$("[class='step_1'] .error_tips").show();return}if(a.length!=4){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;验证码格式错误");$("[class='step_1'] .error_tips").show();return}$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>");$("[class='step_1'] .error_tips").hide()};function em_register(){var d=$("#register_form-mail").val();var c=$("#register_form-mail-pwd").val();if(!check_email(d)||!em_check_password(c)){Captcha.load("[class='con_box show'] .pic_verification");return}var f=$("#register_form-mail-verification").val();
if(f==""||f.length!=4){$("#em_error_tips").html("验证码错误");$("#em_error_tips").show();Captcha.load("[class='con_box show'] .pic_verification");return}var g=new JSEncrypt();var e="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDXQG8rnxhslm+2f7Epu3bB0inrnCaTHhUQCYE+2X+qWQgcpn+Hvwyks3A67mvkIcyvV0ED3HFDf+ANoMWV1Ex56dKqOmSUmjrk7s5cjQeiIsxX7Q3hSzO61/kLpKNH+NE6iAPpm96Fg15rCjbm+5rR96DhLNG7zt2JgOd2o1wXkQIDAQAB";g.setPublicKey(e);d=g.encrypt(d);c=g.encrypt(c);var a={"user.email":d,"user.password":c,validCode:f,sig:$("#validateSig").val(),returnUrl:$("#returnUrl").val()};var b=URLPrefix.passport+"/m/mRegisterByEmail.do";$("#email_reg_btn").addClass("disable");$("#email_reg_btn").off("click",em_register);$.ajax({type:"post",url:b,data:a,async:true,complete:function(){$("#email_reg_btn").removeClass("disable");$("#email_reg_btn").on("click",em_register)
},success:function(h){if(h.errorCode==0||h.errorCode==14){window.location=h.returnUrl}else{Captcha.load("[class='con_box show'] .pic_verification");if(h.errorCode==1){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;邮箱不能为空");$("#em_error_tips").show()}else{if(h.errorCode==2){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;验证码错误");$("#em_error_tips").show()}else{if(h.errorCode==3){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的邮箱");$("#em_error_tips").show()}else{if(h.errorCode==18){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;该邮箱已注册，请直接<a href='/m/login_input.do'>登录</a>");$("#em_error_tips").show()}else{if(h.errorCode==4){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能为空");
$("#em_error_tips").show()}else{if(h.errorCode==5){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;您的密码存在安全隐患,请更改 ");$("#em_error_tips").show()}else{if(h.errorCode==13){$("#em_error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;系统异常 ");$("#em_error_tips").show()}}}}}}}}}})}function check_phone(a){if(a==""){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;不能为空");$("[class='step_1'] .error_tips").show();return false}var b=/^1\d{10}$/;if(!b.test(a)){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的手机号码");$("[class='step_1'] .error_tips").show();return false}$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>");
$("[class='step_1'] .error_tips").hide();return true}function check_password(a){var b=check_pwd1(a);if(b==1){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能为空");$("[class='step_2'] .error_tips").show();return false}if(b==2){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码为6-20位字符");$("[class='step_2'] .error_tips").show();return false}if(b==3){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码为6-20位字符");$("[class='step_2'] .error_tips").show();return false}if(b==4){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码中不允许有空格");$("[class='step_2'] .error_tips").show();return false}if(b==5){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为数字");
$("[class='step_2'] .error_tips").show();return false}if(b==6){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为字母，请包含至少1个数字或符号");$("[class='step_2'] .error_tips").show();return false}if(b==7){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为符号");$("[class='step_2'] .error_tips").show();return false}if(b==8){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码不能全为相同字符或数字");$("[class='step_2'] .error_tips").show();return false}$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>");$("[class='step_2'] .error_tips").hide();return true}function register(){var d=$("#register_form-phone-pwd").val();if(!check_password(d)){return
}var g=new JSEncrypt();var e="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDXQG8rnxhslm+2f7Epu3bB0inrnCaTHhUQCYE+2X+qWQgcpn+Hvwyks3A67mvkIcyvV0ED3HFDf+ANoMWV1Ex56dKqOmSUmjrk7s5cjQeiIsxX7Q3hSzO61/kLpKNH+NE6iAPpm96Fg15rCjbm+5rR96DhLNG7zt2JgOd2o1wXkQIDAQAB";g.setPublicKey(e);d=g.encrypt(d);var c=$("#register_form-phone-message").val();var f=$("#csrf_state").val();var a={password:d,validCode:c,state:f};var b=URLPrefix.passport+"/m/mRegisterByPhone.do";$("[class='step_2'] .phone_reg_btn").addClass("disable");$("[class='step_2'] .phone_reg_btn").off("click",register);$.ajax({type:"post",url:b,data:a,async:true,complete:function(){$("[class='step_2'] .phone_reg_btn").removeClass("disable");$("[class='step_2'] .phone_reg_btn").on("click",register)},success:function(h){if(h.errorCode==0||h.errorCode==14||h.errorCode==19){window.location=h.returnUrl
}else{if(h.errorCode==1){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;注册失败，参数有误");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==2){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;短信验证码错误");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==41){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;短信验证码已过期，请重新获取");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==4){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;密码格式错误 ");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==5){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;您的密码存在安全隐患,请更改 ");
$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==13){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;系统异常");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==15){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的手机号");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==16){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;该手机号已存在，请重新输入手机号");$("[class='step_2'] .error_tips").show()}else{if(h.errorCode==21){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;注册异常，请稍后再试");$("[class='step_2'] .error_tips").show()}}}}}}}}}}}})}check_captcha=function(){var a=$("#register_form-phone-verification").val();
if(a==""){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;请输入校验码");$("[class='step_1'] .error_tips").show();return}if(a.length!=4){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;验证码格式错误");$("[class='step_1'] .error_tips").show();return}$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>");$("[class='step_1'] .error_tips").hide()};submit_mobile=function(){if($("[class='step_1'] .phone_reg_btn").hasClass("disable")){return}var c=$("#register_form-phone").val();if(!check_phone(c)){return}var b=$("#register_form-phone-verification").val();if(b==""){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;请输入校验码");$("[class='step_1'] .error_tips").show();
return}if(b.length!=4){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;验证码格式错误");$("[class='step_1'] .error_tips").show();return}var f=new JSEncrypt();var d="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDXQG8rnxhslm+2f7Epu3bB0inrnCaTHhUQCYE+2X+qWQgcpn+Hvwyks3A67mvkIcyvV0ED3HFDf+ANoMWV1Ex56dKqOmSUmjrk7s5cjQeiIsxX7Q3hSzO61/kLpKNH+NE6iAPpm96Fg15rCjbm+5rR96DhLNG7zt2JgOd2o1wXkQIDAQAB";f.setPublicKey(d);c=f.encrypt(c);var e={subMobile:c,validCode:b,sig:$("#validateSig").val(),returnUrl:$("#returnUrl").val()};var a=URLPrefix.passport+"/m/mConfirmPhone.do";$(".step_1 .phone_reg_btn").addClass("disable");$("[class='step_1'] .phone_reg_btn").off("click",submit_mobile);$.ajax({type:"post",url:a,data:e,async:false,complete:function(){$(".step_1 .phone_reg_btn").removeClass("disable");
$("[class='step_1'] .phone_reg_btn").on("click",submit_mobile)},success:function(g){if(g.errorCode==0){$(".step_1").hide();$(".step_2").show();$("[class='step_2'] .phone_reg_btn").off("click",register);$("[class='step_2'] .phone_reg_btn").on("click",register);counter();return}if(g.errorCode==14){window.location=g.returnUrl;return}Captcha.load("[class='con_box show'] .pic_verification");if(g.errorCode==1){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;手机号不能为空");$("[class='step_1'] .error_tips").show()}else{if(g.errorCode==2){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;验证码错误");$("[class='step_1'] .error_tips").show()}else{if(g.errorCode==15){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的手机号");
$("[class='step_1'] .error_tips").show()}else{if(g.errorCode==16){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;该手机号码已注册，请直接<a style='color: #07a5ff;' href='/m/login_input.do'>登录</a>");$("[class='step_1'] .error_tips").show()}else{if(g.errorCode==13){$("[class='step_1'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;系统异常");$("[class='step_1'] .error_tips").show()}}}}}}})};on_send_mobile_captcha_success=function(a){_timer=setInterval(function(){if(_curDate>0){$(t_again_message).find(".num").text(_curDate);_curDate--}else{$(t_again_message).removeClass("disable");clearInterval(_timer)}},1000)};on_send_mobile_captcha_fail=function(a){$(t_again_message).removeClass("disable");if(a==1){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;不能为空");
$("[class='step_2'] .error_tips").show()}else{if(a==15){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;格式错误，请输入正确的手机号码");$("[class='step_2'] .error_tips").show()}else{if(a==16){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;该手机号码已注册，请直接<a style='color: #07a5ff;' href='/m/login_input.do'>登录</a>");$("[class='step_2'] .error_tips").show()}else{if(a==17){$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;每天只有3次获取验证码的机会");$("[class='step_2'] .error_tips").show()}else{$("[class='step_2'] .error_tips").html("<span class='icon-warning icon_warning'></span>&nbsp;短信发送失败");$("[class='step_2'] .error_tips").show()}}}}};function loadImageUrl(c){var a={adCode:c};var b=URLPrefix.passport+"/m/loadAd.do";
$.ajax({type:"post",url:b,data:a,async:true,success:function(e){if(e){if(e.imageUrl){var f=document.getElementById("ad_position_area");var d=document.createElement("img");d.src=e.imageUrl;f.appendChild(d)}}}})};var commonSymbol="[\\.\\,\\`\\~\\!\\@\\#\\$\\%\\\\^\\&\\*\\(\\)\\-\\_\\=\\+\\[\\{\\]\\}\\\\|\\;\\:\\‘\\’\\“\\”\\<\\>\\/?]+";function isSameWord(g){var e;if(g!=null&&g!=""){e=g.charCodeAt(0);e="\\"+e.toString(8);var f="["+e+"]{"+(g.length)+"}";var h=new RegExp(f);return h.test(g)}return true}function check_pwd1(j){if(j==""){return 1}if(j.length>20){return 2}if(j.length<6){return 3}var o=/\s+/;if(o.test(j)){return 4}var m=/^[0-9]+$/;if(m.test(j)){return 5}var l=/^[a-zA-Z]+$/;if(l.test(j)){return 6}var i=/^[^0-9A-Za-z]+$/;if(i.test(j)){return 7}if(isSameWord(j)){return 8}var p="d*"+commonSymbol+"";var k="\\\d+[A-Za-z]|[A-Za-z]+[0-9]+|[A-Za-z]+"+commonSymbol+"[0-9]+|[A-Za-z]+[0-9]+"+commonSymbol+"|"+p+"";var n=new RegExp(k);if(!n.test(j)){return 10}return 0};Captcha={mode:"remote",url0:"/passport/valid_code.do",url:"https://captcha.yhd.com/public/getjpg.do",getCaptchaUrl:function(){if(this.mode=="remote"){return this.url}return this.url0},load:function(d){var f=$(d);var e=this.getCaptchaUrl();if(f){if(e==this.url){getValidateSigAndSetImageSrc(f)}else{f.attr("src",e+"?t="+Math.random())}}},url2:"/m/mSendCheckCodeForRegister.do",url3:"/passport/sendMobileCheckCode.do",url4:"/passport/sendCheckCodeForRegister.do",url5:"/validator/send.do",url6:"/validator/sendWithoutCheck.do",sendMobileCaptchaWithParam:function(g,e,f,h){$.ajax({type:"POST",url:g,data:e,async:false,success:function(b){if(b){if(b.errorCode!=0){var a=b.errorCode;h.apply(this,[a]);return}f.apply(this,[b.errorCode])}}})},sendMobileCaptcha:function(f,h,e,g){$.ajax({type:"POST",url:f,async:false,success:function(b){if(b){if(b.errorCode!=0){var a=b.errorCode;
g.apply(this,[a]);return}e.apply(this,[b.errorCode])}}})},send:function(e,f,d){this.sendMobileCaptcha(this.url2,e,f,d)},setMode:function(b){this.mode=b}};function getValidateSigAndSetImageSrc(b){$.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",url:"https://captcha.yhd.com/public/getsig.do?t="+Math.random(),success:function(a){var e=a.sig;$("#validateSig").val(e);var f="https://captcha.yhd.com/public/getjpg.do?sig="+e;b.attr("src",f)}})}ValidatorProvider={};ValidatorProvider.onBlur=function(f,e){var d=jQuery("#vcd").val();if(d==""){jQuery("#code_right").hide();jQuery("#code_wrong").show();showErrorInfo($("#vcd"),"请输入校验码")}else{if(d.length!=4){jQuery("#code_right").hide();jQuery("#code_wrong").show();showErrorInfo($("#vcd"),"验证码格式不正确")}}};ValidatorProvider.setValidateUrl=function(b){this["validateUrl"]=b
};ValidatorProvider.success=function(b){};ValidatorProvider.fail=function(b){};ValidatorProvider.error=function(b){};ValidatorProvider.onValidate=function(){var c=$("#vcd").val();if(c.length!=4){jQuery("#code_right").hide();jQuery("#code_wrong").show();showErrorInfo($("#vcd"),"验证码格式不正确");return}var d={validCode:c};jQuery.post(this["validateUrl"],d,function(a){if(a){if(a.errorCode!=0){if(a.errorCode==2){jQuery("#code_right").hide();jQuery("#code_wrong").show();if(a.refresh){if(a.refresh==1){passport_refresh_valid_code()}}showErrorInfo($("#vcd"),"验证码错误，请重新输入")}}else{jQuery("#code_right").show();jQuery("#code_wrong").hide();clearErrorInfo()}}else{jQuery("#code_right").hide();jQuery("#code_wrong").show();clearErrorInfo()}})};Validator={};Validator.registerValidatorProvider=function(){};